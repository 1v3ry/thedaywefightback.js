
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <!-- Bootstrap core CSS -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="styles.css" />
</head>

<body>

    <div id="banner-container" class="container">
        <div id="first-slide">
            <img src="imgs/splash.png" class="img-responsive abs-centered" id="splash" />
        </div>
        <div id="second-slide" style="display: none;">
            <div class="row">
                <div class="col-md-6"></div>
                <div class="col-md-6">
                    <div class="col-md-5">
                        <form method="get" action="http://call.taskforce.is/create" class="call-form" role="form">
                            <div class="form-group">
                                <label class=" control-label" for="userPhone">
                                    <img src="imgs/call-your-legislators.png" alt="Call your legislators!"/>
                                </label>
                                <div class="c">
                                    <input type="tel" placeholder="YOUR PHONE NUMBER" name="userPhone" class="form-control " id="userPhone">
                                </div>
                            </div>
                            <span id="error-text"></span>
                            <div class="form-group">
                              <input id="submit" type="submit" value="CONTINUE >>" class="">
                            </div>
                        </form>
                    </div>
                    <div class="col-md-5">
                        <form method="get" action="http://call.taskforce.is/create" class="email-form" role="form" >
                            <div class="form-group">
                                <label class=" control-label" for="userEmail">
                                    <img src="imgs/email-your-legislators.png" alt="Email your legislators!"/>
                                </label>
                                <div class="c">
                                    <input type="tel" placeholder="YOUR EMAIL ADDRESS" name="userEmail" class="form-control" id="userEmail">
                                </div>
                            </div>
                            <span id="error-text"></span>
                            <div class="form-group">
                              <input id="submit" type="submit" value="CONTINUE >>" class="">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer" style="display: none;">
      <div class="container">
        <div class="col-md-3">
          <span class="footer-notice">
            <span class="important">10,045</span> CALLS PLACED
          </span>
        </div>
        <div class="col-md-3">
          <span class="footer-notice">
            <span class="important">160,134</span> EMAILS SENT
          </span>
        </div>

        <div class="col-md-3 col-md-offset-3"  style="text-align: right;"> 
          <span class="footer-notice">
            <span class="important">FIGHT</span> FOR THE FUTURE
          </span>
        </div>
      </div>
    </div>
    <script type="text/javascript">
    function isValidPhoneNumber(value) {
        if (!value) return false;
        var count = value.replace(/[^0-9]/g, "").length;

        return count == 10 || count == 11;
    }

    function isValidZipCode(value) {
        if (!value) return false;
        var count = value.replace(/[^0-9]/g, "").length;

        return count == 5;
    }


    var zipCodeError = function(el) {
        document.getElementById("error-text").innerHTML += "Invalid Zip";

    };

    var phoneError = function(el) {
        document.getElementById("error-text").innerHTML += "Invalid Phone";
    };


    // On form submit, validate fields

    var onFormSubmit = function(e) {
        document.getElementById("error-text").innerHTML = "";
        e.preventDefault();
        var userZip = document.getElementById("userZip");
        var userPhone = document.getElementById("userPhone");

        console.log(isValidZipCode(userZip.value), isValidPhoneNumber(userPhone.value));

        var errors = false;

        // Valid Zip?
        if (!isValidZipCode(userZip.value)) {
            zipCodeError(userZip);
            errors = true;
        }

        // Valid Phone?
        if (!isValidPhoneNumber(userPhone.value)) {
            phoneError(userPhone);
            errors = true;
        }

        if (errors) {
            return false;
        }


        // Instead of sending an ajax request, lets just assume success and create an iframe to do the call
        var iframe = document.createElement('iframe');
        iframe.style.display = "none";
        iframe.src = 'http://call.taskforce.is/create';
        document.body.appendChild(iframe);

        // Hide form etc below here;

        return false;
    }

    // Attach listener to call form

    var ele = document.getElementById("call-form");
    if (ele.addEventListener) {
        ele.addEventListener("submit", onFormSubmit, false); //Cool modern browser!
    } else if (ele.attachEvent) {
        ele.attachEvent('onsubmit', onFormSubmit); //The evil IE needs extra
    }
    setTimeout(function() {
        $('#first-slide').fadeOut(00, function() {
            $('#second-slide').fadeIn(00);
            $('.footer').fadeIn(000);
        })
    }, 000);
    </script>
</body>

</html>
